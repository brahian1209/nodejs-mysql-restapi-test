"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ActualizarPorId=exports.GetCountUsserActive=exports.deleteUsserById=exports.getUsserBYID=exports.crearUsuario=exports.getUsuarios=void 0;var _index=require("../database/index.js"),getUsuarios=function(e,r){var t,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap((0,_index.getConnection)());case 3:return t=e.sent,e.next=6,regeneratorRuntime.awrap(t.request().query(_index.querys.getAllUsuarios));case 6:n=e.sent,r.json(n.recordset),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),r.status(500),r.send(e.t0.message);case 14:case"end":return e.stop()}},null,null,[[0,10]])};exports.getUsuarios=getUsuarios;var crearUsuario=function(r,t){var n,s,a,o,u,i;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.body,s=n.NombreCompleto,a=n.CorreoElectronico,o=n.Usuario,u=n.Contrasena,null==s||null==a||null==o||null==u)return e.abrupt("return",t.status(400).json({message:"Debe diligenciar todos los campos"}));e.next=3;break;case 3:return e.prev=3,e.next=6,regeneratorRuntime.awrap((0,_index.getConnection)());case 6:return i=e.sent,e.next=9,regeneratorRuntime.awrap(i.request().input("NombreCompleto",_index.sql.VarChar,s).input("CorreoElectronico",_index.sql.VarChar,a).input("Usuario",_index.sql.VarChar,o).input("Contrasena",_index.sql.VarChar,u).query(_index.querys.CreateNewUsser));case 9:console.log(result),t.json({NombreCompleto:s,CorreoElectronico:a,Usuario:o}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),t.status(500),t.send(e.t0.message);case 17:case"end":return e.stop()}},null,null,[[3,13]])};exports.crearUsuario=crearUsuario;var getUsserBYID=function(r,t){var n,s,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.params.id,e.next=3,regeneratorRuntime.awrap((0,_index.getConnection)());case 3:return s=e.sent,e.next=6,regeneratorRuntime.awrap(s.request().input("Id",n).query(_index.querys.getUsserById));case 6:a=e.sent,console.log(a),t.send(a.recordset[0]);case 9:case"end":return e.stop()}})};exports.getUsserBYID=getUsserBYID;var deleteUsserById=function(r,t){var n,s,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.params.id,e.next=3,regeneratorRuntime.awrap((0,_index.getConnection)());case 3:return s=e.sent,e.next=6,regeneratorRuntime.awrap(s.request().input("Id",n).query(_index.querys.deleteUsser));case 6:a=e.sent,console.log(a),t.sendStatus(204);case 9:case"end":return e.stop()}})};exports.deleteUsserById=deleteUsserById;var GetCountUsserActive=function(e,r){var t,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap((0,_index.getConnection)());case 2:return t=e.sent,e.next=5,regeneratorRuntime.awrap(t.request().query(_index.querys.GetCountUsserActive));case 5:n=e.sent,r.json(n.recordset[0][""]);case 7:case"end":return e.stop()}})};exports.GetCountUsserActive=GetCountUsserActive;var ActualizarPorId=function(r,t){var n,s,a,o,u,i,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.body,s=n.NombreCompleto,a=n.CorreoElectronico,o=n.Usuario,u=n.Contrasena,i=r.params.id,null==s||null==a||null==o||null==u)return e.abrupt("return",t.status(400).json({message:"Debe diligenciar todos los campos"}));e.next=4;break;case 4:return e.next=6,regeneratorRuntime.awrap((0,_index.getConnection)());case 6:return c=e.sent,e.next=9,regeneratorRuntime.awrap(c.request().input("NombreCompleto",_index.sql.VarChar,s).input("CorreoElectronico",_index.sql.VarChar,a).input("Usuario",_index.sql.VarChar,o).input("Contrasena",_index.sql.VarChar,u).input("Id",_index.sql.Int,i).query(_index.querys.ActualizarPorId));case 9:t.json({NombreCompleto:s,CorreoElectronico:a,Usuario:o,Contrasena:u});case 10:case"end":return e.stop()}})};exports.ActualizarPorId=ActualizarPorId;
//# sourceMappingURL=Login.controller.min.js.map
